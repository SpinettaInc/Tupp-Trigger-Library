document.addEventListener("alpine:init",()=>{Alpine.data("tuppTrigger",(e,t=null,n=null,s="replace",r=500)=>({value:"",init(){this.setupEventListeners()},setupEventListeners(){this.$watch("value",Alpine.debounce(()=>{this.processEvent()},r))},async processEvent(){let r=this.getValue(t),a=await this.queryAPI({question:r},e);a&&this.applyResponse(n,a,s)},getValue(e){return e?document.querySelector(e).value:this.value},async queryAPI(e,t){try{let n=await fetch(apiBaseURL+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await this.handleResponse(n)}catch(s){console.error("API call failed:",s)}},async handleResponse(e){if(e.ok){let t=await e.json();return t.text?t.text:t}console.error(`Error ${e.status}: ${e.statusText}`)},applyResponse(e,t,n){let s=document.querySelector(e);if(!s)return;let r="object"==typeof t?JSON.stringify(t):t;switch(n){case"append":s.innerHTML+=r;break;case"prepend":s.innerHTML=r+s.innerHTML;break;case"replace":s.innerHTML=r}}}))});