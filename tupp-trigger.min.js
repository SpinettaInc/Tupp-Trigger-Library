!function(t,e){"use strict";function a(t){let a=t.target,r=a.getAttribute("data-tupp-chatflow-id"),i=a.getAttribute("data-tupp-source-id"),s=a.getAttribute("data-tupp-source-class"),c=a.getAttribute("data-tupp-target-id"),u=a.getAttribute("data-tupp-target-class"),l=a.getAttribute("data-tupp-target-action"),o=a.getAttribute("data-tupp-target-style"),p=i||s?function t(a,r){let n=a?e.getElementById(a):r?e.querySelector("."+r):null;return n?n.value:null}(i,s):a.value;r&&null!==p&&n({question:p},"https://tupp.io/api/v1/prediction/"+r).then(t=>{applyResponseToTarget(t,c,u,l,o)}).catch(t=>console.error("API call failed:",t))}function r(t,a){var r,n;let i=(r=a.id,n=a.class,r?[e.getElementById(r)]:n?Array.from(e.getElementsByClassName(n)):[]);i.forEach(e=>{var r,n;r=e,(n=a.style)&&r&&(r.style.cssText+=n),function t(e,a,r){let n="object"==typeof a?JSON.stringify(a):a;switch(r){case"append":e.innerHTML+=n;break;case"prepend":e.innerHTML=n+e.innerHTML;break;case"replace":e.innerHTML=n}}(e,t,a.action)})}async function n(t,e){try{let a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await i(a)}catch(r){console.error("API call failed:",r)}}async function i(t){switch(t.status){case 200:let e=await t.json();return e.text?e.text:e;case 400:case 401:case 403:case 404:case 500:console.error(`Error ${t.status}: ${t.statusText}`);break;default:console.error("Error:",t.status)}}t.TuppTrigger={init:function t(){e.querySelectorAll(".tupp-trigger").forEach(t=>{let e;switch(t.tagName){case"INPUT":case"TEXTAREA":e="input";break;case"SELECT":e="change";break;default:return}t.addEventListener(e,a)})}}}(window,document);
